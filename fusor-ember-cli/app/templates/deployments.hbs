<h1>Deployments</h1>

<div class='new-deployment-button'>
  {{#link-to 'deployment-new.start' class='btn btn-success'}}
      New Deployment
  {{/link-to}}
</div>

<br />
<form class='form'>
<div class="clearfix">
   <div class="form-group filter-deployments">
     <div class='col-md-5'>
       {{input type='text' class='form-control filter-input'
                           placeholder='Filter ...'
                           value=searchDeploymentString}}
     </div>
     <button class='btn btn-default' style='margin-left:-20px'><i class="fa fa-search"></i> Search</button>
   </div>
</div>
</form>
<p class='displaying-entries'>
  {{if isFiltered 'Found' 'Displaying'}} <strong>{{filteredDeployments.length}} of {{totalDeployments}}</strong> entries
</p>
<table class="table table-bordered table-striped small deployments-table">
  <thead>
    <tr>
      <th> {{#link-to 'deployments' (query-params sort="name")}}Name{{/link-to}} </th>
      <th> {{#link-to 'deployments' (query-params sort="environment")}}Environment{{/link-to}} </th>
      <th> Organization </th>
      <th> Status </th>
      <th> </th>
    </tr>
  </thead>

  <tbody>
  {{#each filteredDeployments as |deployment|}}
      {{tr-deployment deployment=deployment}}
  {{/each}}
  </tbody>
</table>

{{#infinity-loader infinityModel=model destroyOnInfinity=true}}
  <div class="spinner spinner-md spinner-inline"></div>
  <span class='spinner-text'>
    Loading more deployments ....
  </span>
  <br />
{{/infinity-loader}}

<p class='displaying-entries'>
  {{if isFiltered 'Found' 'Displaying'}} <strong>{{filteredDeployments.length}} of {{totalDeployments}}</strong> entries
</p>

{{delete-deployment-modal openModal=openModal
                          deployment=deploymentInModal
                          deleteDeployment='deleteDeployment'}}
