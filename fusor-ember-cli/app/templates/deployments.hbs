<h1>Deployments</h1>

<div class='new-deployment-button'>
  {{#link-to 'deployment-new.start' class='btn btn-success'}}
      New Deployment
  {{/link-to}}
</div>

<br />
<form class='form'>
<div class="clearfix">
   <div class="form-group filter-deployments">
     <div class='col-md-5'>
       {{input type='text' class='form-control filter-input'
                           placeholder='Filter ...'
                           value=search}} {{search}}
     </div>
     <button class='btn btn-default' style='margin-left:-20px'><i class="fa fa-search"></i> Search</button>
   </div>
</div>
</form>
<p class='displaying-entries'>
  {{if isFiltered 'Found' 'Displaying'}} <strong>{{filteredDeployments.length}} of {{totalDeployments}}</strong> entries
</p>
<div class='table-responsive'>
<table class="table table-bordered table-striped small deployments-table">
  <thead>
    <tr>
      <th>
        {{#if isFullyLoaded}}
          {{#link-to 'deployments' (query-params sort_by2="name" dir2=sortByDirection2)}}
            Name
          {{/link-to}}
        {{else}}
          {{#link-to 'deployments' (query-params sort_by="name" dir=sortByDirection)}}
            Name
          {{/link-to}}
        {{/if}}
      </th>
      <th>
        {{#if isFullyLoaded}}
          {{#link-to 'deployments' (query-params sort_by2="environment" dir2=sortByDirection2)}}Environment{{/link-to}}
        {{else}}
          {{#link-to 'deployments' (query-params sort_by="environment" dir=sortByDirection)}}Environment{{/link-to}}
        {{/if}}
      </th>
      <th> Organization </th>
      <th> Status </th>
      <th> </th>
    </tr>
  </thead>

  <tbody>
  {{#each filteredDeployments as |deployment|}}
      {{tr-deployment deployment=deployment}}
  {{/each}}
  </tbody>
</table>
</div>

{{#infinity-loader infinityModel=model destroyOnInfinity=true}}
  {{#if showLoader}}
    <div class="spinner spinner-md spinner-inline"></div>
    <span class='spinner-text'>
      Loading more deployments ....
    </span>
    <br />
  {{/if}}
{{/infinity-loader}}

<p class='displaying-entries'>
  {{if isFiltered 'Found' 'Displaying'}} <strong>{{filteredDeployments.length}} of {{totalDeployments}}</strong> entries
</p>

{{delete-deployment-modal openModal=openModal
                          deployment=deploymentInModal
                          deleteDeployment='deleteDeployment'}}
